<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>ubuntu常见故障 &middot; Wixb</title>

  
  <link rel="stylesheet" href="http://wixb50.coding.me/css/poole.css">
  <link rel="stylesheet" href="http://wixb50.coding.me/css/hyde.css">
  <link rel="stylesheet" href="http://wixb50.coding.me/css/poole-overrides.css">
  <link rel="stylesheet" href="http://wixb50.coding.me/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://wixb50.coding.me/css/hyde-x.css">
  <link rel="stylesheet" href="http://wixb50.coding.me/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://wixb50.coding.me/touch-icon-144-precomposed.png">
  <link href="http://wixb50.coding.me/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="ubuntu常见故障收集">
  <meta name="keywords" content="ubuntu">
  <link rel="author" href="http://plus.google.com/wixb50">
</head>
<body class="theme-base-0c">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <img src="/avatar.jpg"
             alt="gravatar" title="Wixb">
      
      <h1>Wixb</h1>
      
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="http://wixb50.coding.me/">Home</a></li>
      
      <li class="sidebar-nav-item"><i class='fa fa-cloud'></i><a href="http://wixb50.coding.me/categories/cloud/">Cloud</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/wixb50"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      
      
      
      
      
      
      </li>
    </ul>

    
    <p><script id='flattr'>
      (function(id){
        var s = document.getElementById(id);
        var f = document.createElement('iframe');
        f.src = '//api.flattr.com/button/view/?uid=&button=compact&url=http:\/\/wixb50.coding.me\/&title=Wixb blog';
        f.title = 'Flattr';
        f.height = 20;
        f.width = 110;
        f.style.borderWidth = 0;
        s.parentNode.insertBefore(f, s);
      })('flattr');
    </script></p>
    
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=234 height=52 src="http://music.163.com/outchain/player?type=2&id=400875065&auto=0&height=32"></iframe>
    <p>Copyright &copy; 2016 <a href="http://wixb50.coding.me/license/">License</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1>ubuntu常见故障</h1>
    <span class="post-date">Dec 17, 2015 &middot; 1 minute read &middot; <a href="http://wixb50.coding.me/2015/12/17/ubuntu%E5%B8%B8%E8%A7%81%E6%95%85%E9%9A%9C/#disqus_thread">Comments</a>
    
    <br/>
    <a class="label" href="http://wixb50.coding.me/categories/ubuntu">ubuntu</a><a class="label" href="http://wixb50.coding.me/categories/os">os</a>
    </span>
    

<h2 id="目录:881b3e9f38deefcc7d28a0a0e3b6c85a">目录</h2>

<!-- MarkdownTOC -->

<ul>
<li><a href="#ssh错误-permission-denied-publickey">ssh错误: permission denied (publickey)</a></li>
<li><a href="#unity菜单栏消失">unity菜单栏消失</a></li>
<li><a href="#google-chrome更新出错">google chrome更新出错</a></li>
<li><a href="#云服务器内存耗尽，打开虚拟内存">云服务器内存耗尽，打开虚拟内存</a></li>
<li><a href="#修改了ssh默认端口之后，如何配置git">修改了SSH默认端口之后，如何配置git</a></li>
<li><a href="#linux-wps不能使用中文输入法">Linux WPS不能使用中文输入法</a></li>
<li><a href="#清理ubuntu连接过的服务器记录">清理ubuntu连接过的服务器记录</a></li>
<li><a href="#ubuntu与windows双系统时间不同步">Ubuntu与Windows双系统时间不同步</a></li>
</ul>

<!-- /MarkdownTOC -->

<h2 id="ssh错误-permission-denied-publickey:881b3e9f38deefcc7d28a0a0e3b6c85a">ssh错误: permission denied (publickey)</h2>

<ol>
<li>登录远程主机，将/etc/ssh/sshd_config文件中的<code>PasswordAuthentication no</code> 改为<code>PasswordAuthentication yes</code>。<br /></li>
<li>重启sshd服务：<code>/etc/init.d/sshd restart</code>。</li>
<li>问题解决。</li>
</ol>

<p>原因：scp是基于ssh的拷贝服务，ssh在没有密钥登录的情况下，禁用了密码登录，故出现如上错误</p>

<h2 id="unity菜单栏消失:881b3e9f38deefcc7d28a0a0e3b6c85a">unity菜单栏消失</h2>

<ol>
<li>安装<code>ccsm</code>，终端打开<code>ccsm</code>；</li>
<li>点击<code>桌面-&gt;ubuntu unity plugin</code>，启用、忽略错误、重启即可。</li>
<li>点击<code>桌面-&gt;Desktop Wall</code>，启用，启用桌面快捷键。</li>
<li>问题解决。</li>
</ol>

<p>原因：compiz设置错误。</p>

<h2 id="google-chrome更新出错:881b3e9f38deefcc7d28a0a0e3b6c85a">google chrome更新出错</h2>

<p>1.Setup key with:</p>

<pre><code>wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add - 
</code></pre>

<p>2.Setup repository with:</p>

<pre><code>sudo sh -c 'echo &quot;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt;&gt; /etc/apt/sources.list.d/google-chrome.list'
</code></pre>

<p>3.Update package with:</p>

<pre><code>sudo apt-get update
</code></pre>

<p>参考方案: <a href="http://www.ubuntuupdates.org/ppa/google_chrome">3rd Party Repository: Google Chrome</a></p>

<h2 id="云服务器内存耗尽-打开虚拟内存:881b3e9f38deefcc7d28a0a0e3b6c85a">云服务器内存耗尽，打开虚拟内存</h2>

<p>virtual memory exhausted: Cannot allocate memory 问题：</p>

<pre><code>$ dd if=/dev/zero of=/swap bs=1024 count=1M 
Format the swap file: 
$ mkswap /swap 
Enable the swap file: 
$ swapon /swap 
Enable swap on boot: 
$ echo &quot;/swap swap swap sw 0 0&quot; &gt;&gt; /etc/fstab
</code></pre>

<h2 id="修改了ssh默认端口之后-如何配置git:881b3e9f38deefcc7d28a0a0e3b6c85a">修改了SSH默认端口之后，如何配置git</h2>

<p>现在假设原来的项目的remote设置为git@domain.com:Projects/p1.git，将服务器SSH默认端口修改为3022后，导致push出错。</p>

<p>第一种解决方案:</p>

<pre><code># 直接修改URL为SSH://开头
git remote set-url origin ssh://git@domain.com:3022/~/Projects/p1.git
</code></pre>

<p>第二种解决方案：</p>

<pre><code># 修改本地配置文件
cat&gt;~/.ssh/config
# 映射一个别名
host newdomain
hostname domain.com
port 3022
# ctrl+D
</code></pre>

<h2 id="linux-wps不能使用中文输入法:881b3e9f38deefcc7d28a0a0e3b6c85a">Linux WPS不能使用中文输入法</h2>

<p>因为环境变量的问题无法使用，直接修改在/usr/bin目录下的wps、wpp、et三个文件，在文件的开头加上下面的代码：</p>

<pre><code>export XMODIFIERS=&quot;@im=fcitx&quot;
export QT_IM_MODULE=&quot;fcitx&quot;
</code></pre>

<h2 id="清理ubuntu连接过的服务器记录:881b3e9f38deefcc7d28a0a0e3b6c85a">清理ubuntu连接过的服务器记录</h2>

<p>保存目录为nautilus中，直接清空配置文件</p>

<pre><code>rm ~/.config/nautilus/servers
</code></pre>

<h2 id="ubuntu与windows双系统时间不同步:881b3e9f38deefcc7d28a0a0e3b6c85a">Ubuntu与Windows双系统时间不同步</h2>

<blockquote>
<p>之所以 Windows 与 Ubuntu 双系统之间有时间差，是因为这两个系统使用了不同的方式来识别硬件时钟（Hardware Clock）。Ubuntu 将硬件时钟当作 UTC 时间，而 Windows 将硬件时钟当作本地时间（ Local time）。由于时间的处理方式不同，Windows 不管重启多少次都识别 Local time，时间都不会改变。而当我们从 Ubuntu 重启到 Windows 时，硬件时钟已经被 Ubuntu 认为 UTC 方式，而 Windows 再将其强制转换成 Local time，这就造成了时间差。</p>
</blockquote>

<p>我们只需将 Ubuntu 的 UTC 时间切换成 Local time 即可。具体做法就是将 /etc/default/rcS 文件中的 “UTC=yes” 改成 “UTC=no” 即可（没有引号）。更改完成完成之后 Ubuntu 便会使用 Local time 而非 UTC。</p>

<pre><code>sudo sed -i 's/UTC=no/UTC=yes/' /etc/default/rcS
</code></pre>

  </div>
  <div id="disqus_thread"></div>
</div>


<script type="text/javascript">
var disqus_shortname = "wixb";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



<script type="text/javascript">
    var disqus_shortname = "wixb";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script src="http://wixb50.coding.me/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
  var _gaq=[['_setAccount','Your Google Analytics tracking code'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

